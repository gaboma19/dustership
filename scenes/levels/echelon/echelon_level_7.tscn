[gd_scene load_steps=28 format=3 uid="uid://d0yym7kalvlid"]

[ext_resource type="Script" path="res://scenes/levels/level.gd" id="1_puqqw"]
[ext_resource type="PackedScene" uid="uid://dl1i1ytfm3yq8" path="res://scenes/levels/echelon/echelon_background/echelon_background.tscn" id="2_46e5u"]
[ext_resource type="PackedScene" uid="uid://bey7edubynppe" path="res://scenes/tilemaps/echelon_tilemap.tscn" id="3_1ua20"]
[ext_resource type="PackedScene" uid="uid://ccjd8iuh12v15" path="res://scenes/game_start/game_start.tscn" id="3_ntcod"]
[ext_resource type="PackedScene" uid="uid://v8ktvgppf1kf" path="res://scenes/game_camera/game_camera.tscn" id="4_dffsp"]
[ext_resource type="TileSet" uid="uid://bj7nf381gptk8" path="res://scenes/tilemaps/echelon_tile_set_1.tres" id="4_i7n84"]
[ext_resource type="TileSet" uid="uid://bstngg7fa12di" path="res://scenes/tilemaps/echelon_tile_set_2.tres" id="5_bn37m"]
[ext_resource type="Script" path="res://scenes/levels/echelon/echelon_level_7_events.gd" id="5_er4xp"]
[ext_resource type="PackedScene" uid="uid://cp1sgx6p5qtyh" path="res://scenes/tilemaps/echelon_decoration_tiles.tscn" id="6_fcdc0"]
[ext_resource type="PackedScene" uid="uid://dqdu7laenedqk" path="res://scenes/entities/moving_platform/moving_platform.tscn" id="6_xaidc"]
[ext_resource type="PackedScene" uid="uid://bxorvbg3vlxdk" path="res://scenes/level_transitions/level_transition_area.tscn" id="9_2g8ni"]
[ext_resource type="PackedScene" uid="uid://buge8kcxqepq3" path="res://scenes/entities/chest/chest.tscn" id="10_40tex"]
[ext_resource type="Resource" uid="uid://c1mmr81amlp5c" path="res://resources/inventory_item/items/steel_card.tres" id="11_7f2cm"]
[ext_resource type="Resource" uid="uid://34ccf2iojcia" path="res://resources/inventory_item/items/health_tonic.tres" id="11_axopf"]
[ext_resource type="PackedScene" uid="uid://jan8t6wjwwrs" path="res://scenes/entities/battery/battery.tscn" id="12_518d7"]

[sub_resource type="Animation" id="Animation_12owp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_hmnn0"]
resource_name = "call_end_move"
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"end_move"
}]
}

[sub_resource type="Animation" id="Animation_4250v"]
resource_name = "move"
length = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(160, 74)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_abv8s"]
_data = {
"RESET": SubResource("Animation_12owp"),
"call_end_move": SubResource("Animation_hmnn0"),
"move": SubResource("Animation_4250v")
}

[sub_resource type="Animation" id="Animation_2kemc"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_bt5o1"]
resource_name = "call_end_move"
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"end_move"
}]
}

[sub_resource type="Animation" id="Animation_t5uob"]
resource_name = "move"
length = 8.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 8),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(239, 147)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_fggsc"]
_data = {
"RESET": SubResource("Animation_2kemc"),
"call_end_move": SubResource("Animation_bt5o1"),
"move": SubResource("Animation_t5uob")
}

[sub_resource type="Animation" id="Animation_p7vjs"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_u5mm2"]
resource_name = "call_end_move"
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"end_move"
}]
}

[sub_resource type="Animation" id="Animation_jpa4k"]
resource_name = "move"
length = 12.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatableBody2D:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 8, 8.5, 12),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(-243, 139), Vector2(-243, 139), Vector2(-146, 226)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_f41uy"]
_data = {
"RESET": SubResource("Animation_p7vjs"),
"call_end_move": SubResource("Animation_u5mm2"),
"move": SubResource("Animation_jpa4k")
}

[node name="EchelonLevel7" type="Node2D" node_paths=PackedStringArray("game_start")]
y_sort_enabled = true
script = ExtResource("1_puqqw")
map_pin_cell = Vector2i(23, 6)
game_start = NodePath("GameStart")

[node name="EchelonBackground" parent="." instance=ExtResource("2_46e5u")]

[node name="EchelonTileMap1" parent="." instance=ExtResource("3_1ua20")]
z_index = -1
tile_set = ExtResource("4_i7n84")

[node name="EchelonTileMap2" parent="." instance=ExtResource("3_1ua20")]
z_index = -1
tile_set = ExtResource("5_bn37m")

[node name="EchelonDecorationTiles" parent="." instance=ExtResource("6_fcdc0")]
z_index = -1

[node name="GameStart" parent="." instance=ExtResource("3_ntcod")]
position = Vector2(-80, -48)

[node name="GameCamera" parent="." instance=ExtResource("4_dffsp")]
position = Vector2(-80, -48)
custom_limit_top = -80

[node name="Events" type="Node" parent="." node_paths=PackedStringArray("boss_moving_platform") groups=["events"]]
script = ExtResource("5_er4xp")
boss_moving_platform = NodePath("../Entities/MovingPlatform3")

[node name="BossPlatform" type="Node2D" parent="Events"]
position = Vector2(480, 952)

[node name="TrapArea" type="Area2D" parent="Events"]
collision_layer = 0
collision_mask = 2

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Events/TrapArea"]
position = Vector2(16, 8)
polygon = PackedVector2Array(432, 880, 432, 904, 384, 928, 336, 928, 400, 946, 465, 911)

[node name="SpawnPointsParent" type="Node" parent="Events"]

[node name="SpawnPoint" type="Node2D" parent="Events/SpawnPointsParent"]
position = Vector2(480, 888)

[node name="SpawnPoint2" type="Node2D" parent="Events/SpawnPointsParent"]
position = Vector2(608, 952)

[node name="SpawnPoint3" type="Node2D" parent="Events/SpawnPointsParent"]
position = Vector2(480, 1016)

[node name="SpawnPoint4" type="Node2D" parent="Events/SpawnPointsParent"]
position = Vector2(352, 952)

[node name="InvisibleWall" type="StaticBody2D" parent="Events"]
collision_layer = 0
collision_mask = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Events/InvisibleWall"]
polygon = PackedVector2Array(320, 952, 480, 872, 448, 856, 288, 936)

[node name="Entities" type="Node2D" parent="." groups=["entities"]]
y_sort_enabled = true

[node name="Chest" parent="Entities" instance=ExtResource("10_40tex")]
position = Vector2(768, 472)
inventory_item = ExtResource("11_7f2cm")
chest_id = "echelon7_chest0"

[node name="AnimatedSprite2D" parent="Entities/Chest" index="0"]
animation = &"chest4"

[node name="Chest2" parent="Entities" instance=ExtResource("10_40tex")]
position = Vector2(336, 368)
scale = Vector2(-1, 1)
inventory_item = ExtResource("11_axopf")
chest_id = "echelon7_chest1"

[node name="AnimatedSprite2D" parent="Entities/Chest2" index="0"]
animation = &"chest1"

[node name="MovingPlatform" parent="Entities" node_paths=PackedStringArray("animation_player") instance=ExtResource("6_xaidc")]
position = Vector2(144, 149)
animation_player = NodePath("AnimationPlayer")

[node name="Sprite2D" parent="Entities/MovingPlatform/AnimatableBody2D" index="0"]
metadata/_aseprite_wizard_interface_config_ = {
"layer_section": true,
"output_section": true
}

[node name="CollisionPolygon2D" parent="Entities/MovingPlatform/AnimatableBody2D/ActivationArea" index="0"]
polygon = PackedVector2Array(0, -42, -16, -32, 0, -23, 16, -32)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Entities/MovingPlatform"]
libraries = {
"": SubResource("AnimationLibrary_abv8s")
}

[node name="MovingPlatform2" parent="Entities" node_paths=PackedStringArray("animation_player") instance=ExtResource("6_xaidc")]
position = Vector2(273, 452)
animation_player = NodePath("AnimationPlayer")

[node name="CollisionPolygon2D" parent="Entities/MovingPlatform2/AnimatableBody2D/ActivationArea" index="0"]
polygon = PackedVector2Array(0, -42, -17, -32, 0, -23, 16, -32)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Entities/MovingPlatform2"]
libraries = {
"": SubResource("AnimationLibrary_fggsc")
}

[node name="MovingPlatform3" parent="Entities" node_paths=PackedStringArray("animation_player") instance=ExtResource("6_xaidc")]
position = Vector2(514, 701)
animation_player = NodePath("AnimationPlayer")

[node name="CollisionPolygon2D" parent="Entities/MovingPlatform3/AnimatableBody2D/ActivationArea" index="0"]
polygon = PackedVector2Array(0, -40, -17, -32, 0, -23, 17, -31)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Entities/MovingPlatform3"]
libraries = {
"": SubResource("AnimationLibrary_f41uy")
}

[node name="Battery" parent="Entities" node_paths=PackedStringArray("chargeable_entity") instance=ExtResource("12_518d7")]
position = Vector2(-64, 104)
battery_id = "echelon7_battery0"
chargeable_entity = NodePath("../MovingPlatform")

[node name="Battery2" parent="Entities" node_paths=PackedStringArray("chargeable_entity") instance=ExtResource("12_518d7")]
position = Vector2(496, 416)
battery_id = "echelon7_battery1"
chargeable_entity = NodePath("../MovingPlatform2")

[node name="Battery3" parent="Entities" node_paths=PackedStringArray("chargeable_entity") instance=ExtResource("12_518d7")]
position = Vector2(848, 460)
battery_id = "echelon7_battery2"
chargeable_entity = NodePath("../MovingPlatform3")

[node name="Foreground" type="Node2D" parent="." groups=["foreground"]]
z_index = 1

[node name="LevelTransitionArea" parent="." instance=ExtResource("9_2g8ni")]
path = "res://scenes/levels/echelon/echelon_level_2.tscn"
new_player_position = Vector2(352, 440)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="LevelTransitionArea"]
polygon = PackedVector2Array(-144, -64, -112, -80, -80, -64, -112, -48)

[editable path="Entities/Chest"]
[editable path="Entities/Chest2"]
[editable path="Entities/MovingPlatform"]
[editable path="Entities/MovingPlatform2"]
[editable path="Entities/MovingPlatform3"]
